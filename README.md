# 内网穿透实验

# 启动服务端
scp linux_amd64_server/nps root@ip:/opt/
./nps start

# 统一准备工作（必做）

    开启服务端，假设公网服务器ip为1.1.1.1，配置文件中bridge_port为8284，配置文件中web_port为8080
    访问1.1.1.1:8080
    在客户端管理中创建一个客户端(直接点确定就行，不需要填任何东西)，记录下验证密钥vkey
    内网客户端运行（windows使用cmd运行加.exe）
    ./npc -server=1.1.1.1:8024 -vkey=客户端的密钥
# 域名不要在设计成www了，改成*

# 域名解析

适用范围： 小程序开发、微信公众号开发、产品演示

假设场景：

    有一个域名proxy.com，有一台公网机器ip为1.1.1.1
    两个内网开发站点127.0.0.1:81，127.0.0.1:82
    想通过（http|https://）a.proxy.com访问127.0.0.1:81，通过（http|https://）b.proxy.com访问127.0.0.1:82

使用步骤

    将*.proxy.com解析到公网服务器1.1.1.1
    点击刚才创建的客户端的域名管理，添加两条规则规则：1、域名：a.proxy.com，内网目标：127.0.0.1:81，2、域名：b.proxy.com，内网目标：127.0.0.1:82

现在访问（http|https://）a.proxy.com，b.proxy.com即可成功

# 可能会有点延迟